[TOC]:#
# Table of Contents
- [界面要素](#界面要素)
    - [用户、商户共用支付页面](#用户商户共用支付页面)
- [组件](#组件)
    - [添加商品页面](#添加商品页面)
- [界面事件](#界面事件)
    - [登陆界面](#登陆界面)
    - [创建订单界面](#创建订单界面)
    - [订单界面](#订单界面)
    - [扫描订单界面](#扫描订单界面)
    - [支付界面](#支付界面)
    - [通知界面](#通知界面)
- [Action](#action)
- [state数据结构](#state数据结构)

***  

## 界面要素  

### 登陆页面
- 界面要素
  - 一个输入框
    - 作用:是输入用户或商户输入的id
  - 一组选择按钮:商户和用户
    - 作用:是切换登录类型（默认值是商户）
  - 登录按钮
    - 商户登陆：登录到添加商品页面（登录后处理登录类型和id数据）
    - 用户登陆：跳转到扫描订单

### 生成订单页面  
- 添加商品组件
   - 输入数据：表单ID、删除事件、提交事件
   - 输出数据：商品信息
   - 组件要素：
     - 商品名称输入框
       - 要素有输入框、输入成功提示、输入失败提示  
     - 单价输入框
       - 要素有输入框（只允许输入数字精确到小数点后两位）、输入成功提示、输入失败提示  
     - 数量输入框
       - 要素有输入框（只允许输入数字）、输入成功提示、输入失败提示    
     - 删除按钮
       - 要素有按钮（有点击事件，点击事件触发后该添加商品组件消失 ） 
    
- 提交商品组件
   - 输入数据：商户拥有待支付订单的数量
   - 输出数据：添加的商品列表信息
   - 组件要素：
     - 添加商品按钮
       - 要素有按钮（有点击事件，点击事件触发后添加一个添加商品组件）
     - 提交商品按钮
       - 要素有按钮（有点击事件，点击事件触发后添加一个添加商品组件）
     - 待支付跳转按钮
       - 要素有按钮（有点击事件，点击事件触发后跳转到外部给的连接）

### 扫描订单页面  
- 界面要素
  - 一个输入框
    - 作用:输入订单号（由商户产生）
  - 一个匹配按钮
    - 作用:如果用户输入的订单号是正确可用的，就匹配该订单并跳转到订单列表页面，
    - 如果不是正确或不可用订单号，提示信息：该订单不存在（红色字体提示）
  - 一个链接
    - 如果该用户有已经匹配且未完成的订单，显示已经匹配且未完成的订单数量，点击后跳转到订单列表页面
    - 如果没有已经匹配订单，不显示
  
### 订单界面
- 界面要素
   - 订单信息(多行)
     - 商品名称
     - 单价
     - 数量
   - 优惠信息
     - 优惠金额
     - 优惠信息
   - 结算
     - 总价
     - 优惠金额
     - 结算金额
   - 页面按钮：
     - 支付
     - 取消
       - 商户登录可见
       - 用户登录不可见

###  支付页面(用户、商户共用)
- 界面要素
  - 订单信息
    - 订单号
    - 流水号
    - 订单信息(多行)
      - 商品名称
      - 单价
      - 数量
    - 优惠信息
      - 优惠金额
      - 优惠信息
    - 结算
      - 总价
      - 优惠金额
      - 结算金额
  - 按钮
    - 支付结果下拉菜单：模拟支付成功、失败
    - 确定按钮：确定支付成功或者支付失败
      - 商户点确定，页面跳转到添加商品信息页面
      - 用户点确定，页面跳转到扫描订单页面
    - 取消支付按钮：
      - 商户取消支付该订单，页面跳转到添加商品信息页面
      - 用户取消支付该订单，页面跳转到扫描订单页面

### 对话框界面
- 类型(消息、错误、警告)
- 标题
- 消息内容
- 按钮
  - 确定

## 界面事件  
分析对应界面的事件或与对应界面相关的事件
### 登陆界面  
- 登录事件  
- 初始化订单编号事件  
- 初始化订单事件  
- 初始化优惠事件  

### 创建订单界面  
- 添加订单事件

### 订单界面  
- 插入优惠信息事件  
- 取消订单事件  
- 删除订单事件  
- 支付请求事件  

### 扫描订单界面   
- 匹配订单事件  
- 插入订单信息事件

### 支付界面  
- 支付结果事件
- 支付取消事件

### 通知界面

## Action
TODO

## state数据结构  
store中state的数据结构 
```javascript
var state = {
    user: {
        userId: "1",
        userType: "MERCHANT"
    },
    orderId: [1, 2],
    order: {
        1: {
            orderId: "1",
            items: [
                {"name": "ONLY修身撞色拼接女针织裙", "price": 34950, "quantity": 2},
                {"name": "ONLY圆点荷叶边女修身裙", "price": 19950, "quantity": 1},
                {"name": "ONLY棉宽松字母牛仔女外套", "price": 27450, "quantity": 1}
            ]
        },
        2: {
            orderId: "2",
            items: [
                {"name": "ONLY修身撞色拼接女针织裙", "price": 34950, "quantity": 2},
                {"name": "ONLY圆点荷叶边女修身裙", "price": 19950, "quantity": 1},
                {"name": "ONLY棉宽松字母牛仔女外套", "price": 27450, "quantity": 1}
            ]
        }
    },
    marketing: {
        1: {orderId: "1", amt: 58650, msg: "测试优惠, 一律5折"},
        2: {orderId: "2", amt: 58650, msg: "测试优惠, 一律5折"}
    }
}
```